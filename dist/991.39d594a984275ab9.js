"use strict";(self.webpackChunkangular_primeng=self.webpackChunkangular_primeng||[]).push([[991],{4991:(Dt,v,r)=>{r.r(v),r.d(v,{UsersModule:()=>Ft});var h=r(177),c=r(3760),l=r(4341),m=r(467),_=r(5305),b=r(2781),t=r(3953),y=r(1626),u=r(3207),g=r(6354),U=r(5312);class D{constructor(i){this.endPointAPI=i,this._http=(0,t.WQX)(y.Qq),this._baseUrl=`${U.c.URL_API}/${i}`}getAll(i){const e=this._baseUrl,s=this.getRequestParams(i);return(0,u.s)(this._http.get(e,{params:s}).pipe((0,g.T)(this.dataToResources.bind(this))))}getById(i){return(0,u.s)(this._http.get(`${this._baseUrl}/${i}`).pipe((0,g.T)(this.dataToResource.bind(this))))}createOrUpdate(i){return i.id?this.update(i):this.create(i)}delete(i){return(0,u.s)(this._http.delete(`${this._baseUrl}/${i}`))}create(i){return(0,u.s)(this._http.post(this._baseUrl,i).pipe((0,g.T)(this.dataToResource.bind(this))))}update(i){return(0,u.s)(this._http.put(`${this._baseUrl}/${i.id}`,i).pipe((0,g.T)(this.dataToResource.bind(this))))}getRequestParams(i){if(!i)return new y.Nl;const e={};i.requestFilters?.forEach(s=>{e[s.id]=s.value}),delete i.requestFilters,delete i.rows;for(const s in i)(i[s]||"0"===String(i[s]))&&(e[s]=i[s]);return new y.Nl({fromObject:e})}dataToResources(i){return JSON.parse(JSON.stringify(i))}dataToResource(i){return i}}var w=r(7269);let k=(()=>{class n extends D{constructor(){super(w.S.USERS)}getAll(e){return super.getAll(e||{sortby:"name",page:0,page_size:10})}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=r(5779),d=r(1141),j=r(5144),$=r(563);function E(n,i){if(1&n){const e=t.RV6();t.j41(0,"a",4),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.onTakeAction(o))}),t.nrm(1,"span"),t.j41(2,"span",5),t.EFF(3),t.k0s()()}if(2&n){const e=i.$implicit;t.R7$(),t.HbH(e.icon),t.R7$(2),t.JRh(e.label)}}let x=(()=>{class n{constructor(){this.options=[{id:"update",label:"Editar",icon:p.EE.PENCIL},{id:"delete",label:"Remover",icon:p.EE.TRASH}],this.actionClick=new t.bkB}onTakeAction(e){this.actionClick.emit({payload:this.payload,id:e.id})}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-button-action-menu"]],inputs:{payload:"payload",options:"options"},outputs:{actionClick:"actionClick"},decls:4,vars:2,consts:[["menu",""],["pButton","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","p-button-plain",3,"click"],["appendTo","body",3,"popup","model"],["pTemplate","item"],["pRipple","",1,"flex","align-items-center","p-menuitem-link",3,"click"],[1,"ml-2"]],template:function(s,o){if(1&s){const a=t.RV6();t.j41(0,"button",1),t.bIt("click",function(It){t.eBV(a);const Ut=t.sdS(2);return t.Njj(Ut.toggle(It))}),t.k0s(),t.j41(1,"p-menu",2,0),t.DNE(3,E,4,3,"ng-template",3),t.k0s()}2&s&&(t.R7$(),t.Y8G("popup",!0)("model",o.options))},dependencies:[p.Ei,d._f,j.W1,$.n]})}return n})();var S=r(2242);const B=n=>({"p-button-outlined":n});function G(n,i){if(1&n){const e=t.RV6();t.j41(0,"i",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.clearSearch())}),t.k0s()}}function N(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onClickFilterButton())}),t.k0s()}}let M=(()=>{class n{constructor(e){this._formBuilder=e,this.styleClass="",this.hasFilterModal=!1,this.onSearch=new t.bkB,this.clickFilterButton=new t.bkB,this.searchForm=this._formBuilder.group({searchTerm:[""]})}get formControls(){return this.searchForm.controls}ngOnInit(){this.formControls.searchTerm.setValue(this.filters?.search)}onClickFilterButton(){this.clickFilterButton.emit()}clearSearch(){this.formControls.searchTerm.setValue(null),this.onSearch.emit({})}submitSearch(){this.onSearch.emit({search:this.formControls.searchTerm.value})}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(l.ok))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-search-bar"]],inputs:{styleClass:"styleClass",hasFilterModal:"hasFilterModal",filters:"filters"},outputs:{onSearch:"onSearch",clickFilterButton:"clickFilterButton"},decls:8,vars:7,consts:[["filter",""],[1,"flex","align-items-center","gap-2","flex-column","sm:flex-row",3,"ngSubmit","formGroup"],[1,"p-input-icon-left","p-input-icon-right","w-full","overflow-hidden"],[1,"pi","pi-search","d-table"],["pInputText","","type","text","placeholder","Type something here","formControlName","searchTerm",1,"w-full"],["title","Limpar",1,"pi","pi-times","p-3","cursor-pointer","text-center","w-2rem","h-full",2,"top","6px"],["pButton","","type","submit","label","Search",1,"p-button-secondary","w-full","sm:w-8rem",3,"ngClass","disabled"],["pButton","","label","Filters","type","button","icon","pi pi-filter",1,"w-full","sm:w-9rem"],["title","Limpar",1,"pi","pi-times","p-3","cursor-pointer","text-center","w-2rem","h-full",2,"top","6px",3,"click"],["pButton","","label","Filters","type","button","icon","pi pi-filter",1,"w-full","sm:w-9rem",3,"click"]],template:function(s,o){if(1&s){const a=t.RV6();t.j41(0,"form",1),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(o.submitSearch())}),t.j41(1,"span",2),t.nrm(2,"i",3)(3,"input",4,0),t.DNE(5,G,1,0,"i",5),t.k0s(),t.nrm(6,"button",6),t.DNE(7,N,1,0,"button",7),t.k0s()}2&s&&(t.Y8G("formGroup",o.searchForm),t.R7$(5),t.vxM(o.formControls.searchTerm.value?5:-1),t.R7$(),t.Y8G("ngClass",t.eq3(5,B,!o.formControls.searchTerm.value))("disabled",!o.formControls.searchTerm.value),t.R7$(),t.vxM(o.hasFilterModal?7:-1))},dependencies:[h.YU,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,d._f,S.S]})}return n})();var A=r(9114);let R=(()=>{class n{constructor(){this.styleClass="",this.icon="",this.title=""}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-header"]],inputs:{styleClass:"styleClass",icon:"icon",title:"title"},decls:4,vars:5,consts:[[1,"m-0"],["styleClass","mr-2","size","large","styleClass","bg-white",3,"icon"]],template:function(s,o){1&s&&(t.j41(0,"header")(1,"h4",0),t.nrm(2,"p-avatar",1),t.EFF(3),t.k0s()()),2&s&&(t.HbH(o.styleClass),t.R7$(2),t.Y8G("icon",o.icon),t.R7$(),t.SpI(" ",o.title," "))},dependencies:[A.e]})}return n})();var P=r(5716),C=r(9903);function V(n,i){if(1&n&&(t.EFF(0),t.nrm(1,"i")),2&n){const e=t.XpG().$implicit,s=t.XpG(2);t.SpI(" ",e,"\xa0\xa0"),t.R7$(),t.HbH(s.columnIcon)}}function L(n,i){if(1&n&&t.nrm(0,"p-skeleton",4),2&n){const e=t.XpG(3);t.FS9("styleClass",e.animated?"":"p-skeleton-animation-none")}}function X(n,i){if(1&n&&(t.j41(0,"th"),t.DNE(1,V,2,4,"i",3)(2,L,1,1,"p-skeleton",4),t.k0s()),2&n){const e=i.$index,s=t.XpG(2);t.STu("uppercase ",s.commonStyleClass," ",s.columnStyleClass[e],""),t.R7$(),t.vxM(s.columns?1:2)}}function Y(n,i){if(1&n&&(t.j41(0,"tr"),t.Z7z(1,X,3,5,"th",3,t.fX1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Dyx(e.mockItemsColumns)}}function O(n,i){if(1&n&&(t.j41(0,"td"),t.nrm(1,"p-skeleton",4),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.FS9("styleClass",e.animated?"":"p-skeleton-animation-none")}}function H(n,i){if(1&n&&(t.j41(0,"tr"),t.Z7z(1,O,2,1,"td",null,t.fX1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Dyx(e.mockItemsColumns)}}let z=(()=>{class n{constructor(){this.rows="5",this.styleClass="",this.commonStyleClass="",this.columnIcon="pi pi-sort-alt",this.columnsQtty=5,this.columnStyleClass=[],this.animated=!0,this.mockItemsRows=[],this.mockItemsColumns=[]}ngOnInit(){this.mockItemsColumns=this.columns?this.columns:this.fillArray(this.columnsQtty),this.mockItemsRows=this.fillArray(Number(this.rows))}fillArray(e){return Array.from({length:e},(s,o)=>o+1)}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-skeleton-table"]],inputs:{rows:"rows",styleClass:"styleClass",commonStyleClass:"commonStyleClass",columnIcon:"columnIcon",columns:"columns",columnsQtty:"columnsQtty",columnStyleClass:"columnStyleClass",animated:"animated"},decls:3,vars:2,consts:[[3,"value","styleClass"],["pTemplate","header"],["pTemplate","body"],[3,"class"],[3,"styleClass"]],template:function(s,o){1&s&&(t.j41(0,"p-table",0),t.DNE(1,Y,3,0,"ng-template",1)(2,H,3,0,"ng-template",2),t.k0s()),2&s&&(t.FS9("styleClass",o.styleClass),t.Y8G("value",o.mockItemsRows))},dependencies:[p.Ei,P.E,C.XI],styles:[".p-skeleton-animation-none[_ngcontent-%COMP%]:after{animation:none}"]})}return n})();var J=r(2609),Q=r(1232);function Z(n,i){if(1&n&&t.nrm(0,"i"),2&n){const e=t.XpG(2);t.ZvI("",e.icon," mr-3")}}function W(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",6),t.nI1(1,"severityToButton"),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clickOnAction())}),t.k0s()}if(2&n){const e=t.XpG(2);t.ZvI("p-button-",t.bMT(1,4,e.severity)," min-w-max-content h-content"),t.Y8G("label",e.actionButton)}}function q(n,i){if(1&n&&(t.DNE(0,Z,1,3,"i",2),t.j41(1,"div",3),t.nrm(2,"div",4),t.DNE(3,W,2,6,"button",5),t.k0s()),2&n){const e=t.XpG();t.vxM(e.icon?0:-1),t.R7$(2),t.Y8G("innerHTML",e.text,t.npT),t.R7$(),t.vxM(e.actionButton?3:-1)}}let K=(()=>{class n{constructor(){this.text="",this.icon="",this.styleClass="",this.severity="",this.actionButton="",this.onActionClick=new t.bkB}clickOnAction(){this.onActionClick.emit()}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-message"]],inputs:{text:"text",icon:"icon",styleClass:"styleClass",severity:"severity",actionButton:"actionButton"},outputs:{onActionClick:"onActionClick"},decls:2,vars:2,consts:[[3,"severity","styleClass"],["pTemplate",""],[3,"class"],[1,"w-full","flex","align-items-center","justify-content-between"],[3,"innerHTML"],["pButton","","size","small",3,"label","class"],["pButton","","size","small",3,"click","label"]],template:function(s,o){1&s&&(t.j41(0,"p-messages",0),t.DNE(1,q,4,3,"ng-template",1),t.k0s()),2&s&&t.Y8G("severity",o.severity)("styleClass",o.styleClass)},dependencies:[p.Ei,d._f,J.B,Q.B]})}return n})();var tt=r(9670);const et=()=>["new"],nt=()=>["name","email","role","actions"],st=()=>[10,20,30];function ot(n,i){1&n&&t.nrm(0,"app-message",4)(1,"app-skeleton-table",5),2&n&&(t.R7$(),t.Y8G("columns",t.lJ4(1,nt)))}function it(n,i){if(1&n){const e=t.RV6();t.j41(0,"app-search-bar",11),t.bIt("onSearch",function(o){t.eBV(e);const a=t.XpG(2);return t.Njj(a.onSearch(o))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("filters",e.filters)}}function rt(n,i){1&n&&(t.j41(0,"tr")(1,"th",12),t.EFF(2," NAME "),t.nrm(3,"p-sortIcon",13),t.k0s(),t.j41(4,"th",14),t.EFF(5," EMAIL "),t.nrm(6,"p-sortIcon",15),t.k0s(),t.j41(7,"th",16),t.EFF(8," ROLE "),t.nrm(9,"p-sortIcon",17),t.k0s(),t.j41(10,"th",18),t.EFF(11,"ACTIONS"),t.k0s()())}function at(n,i){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"div",19),t.EFF(7),t.k0s()(),t.j41(8,"td")(9,"app-button-action-menu",20),t.bIt("actionClick",function(o){t.eBV(e);const a=t.XpG(2);return t.Njj(a.onClickActionMenu(o))}),t.k0s()()()}if(2&n){const e=i.$implicit;t.R7$(2),t.SpI(" ",e.name," "),t.R7$(2),t.SpI(" ",e.email," "),t.R7$(3),t.SpI(" ",e.role.name," "),t.R7$(2),t.Y8G("payload",e)}}function lt(n,i){if(1&n){const e=t.RV6();t.j41(0,"p-table",6),t.DNE(1,it,1,1,"ng-template",7)(2,rt,12,0,"ng-template",8)(3,at,10,4,"ng-template",9),t.k0s(),t.j41(4,"p-paginator",10),t.bIt("onPageChange",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.onPageChange(o))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("value",e.listItemsPaginated.rows)("rows",e.listItemsPaginated.page_size)("totalRecords",e.listItemsPaginated.total_records)("rowHover",!0),t.R7$(4),t.FCK("currentPageReportTemplate","Displaying {last} of ",e.listItemsPaginated.total_records," ",null==e.mainRoutesNames.USERS.label?null:e.mainRoutesNames.USERS.label.toLocaleLowerCase(),""),t.Y8G("showCurrentPageReport",!0)("first",e.listItemsPaginated.first)("rows",e.listItemsPaginated.page_size)("rowsPerPageOptions",t.lJ4(12,st))("totalRecords",e.listItemsPaginated.total_records)}}let ct=(()=>{class n{constructor(e,s,o){this._usersAPIService=e,this._router=s,this._acRouter=o,this.mainRoutesNames=_.q,this.isLoadingResources=!1}ngOnInit(){this.getResources()}onClickActionMenu(e){var s=this;return(0,m.A)(function*(){const o=e.payload;switch(e.id){case"update":yield s._router.navigate([o.id],{relativeTo:s._acRouter});break;case"delete":b.A.confirmDialog("error","Delete User",`Are you sure you want to delete?:<br>\n                    <strong>${o.name}</strong> ?<br><br>\n                    This action cannot be undone.`,"Delete","Cancel",()=>s.deleteItem(o))}})()}onSearch(e){this.filters=e,this.getResources(this.filters)}onPageChange(e){this.filters||(this.filters={}),this.filters.sortby="name",this.filters.page=e.page,this.filters.page_size=e.rows,this.getResources(this.filters)}retryGetResources(){this.getResources()}deleteItem(e){var s=this;return(0,m.A)(function*(){try{const o=yield s._usersAPIService.delete(e.id);b.A.success("Deletion completed",`${o.message}<br><strong>${e.name}</strong>`),s.getResources(s.filters)}catch(o){console.error(o)}})()}getResources(e){var s=this;return(0,m.A)(function*(){try{s.isLoadingResources=!0;const o=s.getMockUsers();s.listItemsPaginated=o,s.filters=e}catch(o){console.error(o)}finally{s.isLoadingResources=!1}})()}getMockUsers(){return{page_size:10,page:0,first:0,rows:[{id:"uuid",name:"Demo 1",email:"demo1@email.com",role_id:"1",role:{name:"Admin"}},{id:"uuid",name:"Demo 2",email:"demo2@email.com",role_id:"2",role:{name:"Manager"}}],sortby:"name",total_records:2}}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(k),t.rXU(c.Ix),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-users-list"]],decls:6,vars:6,consts:[[1,"card"],[1,"mb-4","flex","justify-content-between","flex-column","sm:flex-row","sm:align-items-center"],[3,"icon","title"],["pButton","","icon","pi pi-plus","label","New",3,"routerLink"],["severity","info","icon","pi pi-spin pi-spinner","text","Searching data..."],[3,"columns"],["dataKey","id",1,"fadein",3,"value","rows","totalRecords","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pageLinkSize","1",3,"onPageChange","showCurrentPageReport","currentPageReportTemplate","first","rows","rowsPerPageOptions","totalRecords"],[3,"onSearch","filters"],["pSortableColumn","name",2,"width","35%"],["field","name"],["pSortableColumn","email",2,"width","35%"],["field","email"],["pSortableColumn","role_id",2,"width","20%"],["field","role_id"],[1,"text-center",2,"width","10%"],[1,"text-overflow",2,"width","80px"],[3,"actionClick","payload"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"app-page-header",2)(3,"button",3),t.k0s(),t.DNE(4,ot,2,2)(5,lt,5,13),t.k0s()),2&s&&(t.R7$(2),t.Mz_("title","Lista of ",o.mainRoutesNames.USERS.label,""),t.Y8G("icon",o.mainRoutesNames.USERS.icon),t.R7$(),t.Y8G("routerLink",t.lJ4(5,et)),t.R7$(),t.vxM(o.isLoadingResources?4:o.listItemsPaginated?5:-1))},dependencies:[x,M,R,z,K,p.Ei,d._f,c.Wk,tt.m,C.XI,C.Tg,C.yc]})}return n})();var T=r(4797);let mt=(()=>{class n{static cloneObject(e){return JSON.parse(JSON.stringify(e))}static formatDateString(e){if(!e)return"";const[s,o,a]=e.split("/");return`${a}-${o}-${s}`}static formatLocaleDateString(e){if(!e)return"";const[s,o,a]=e.split("-");return`${a}/${o}/${s}`}static getStringDateFromDate(e){return e?`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`:""}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pt=(()=>{class n{constructor(){this.isSubmitDisabled=!0,this.isSubmitLoading=!1,this.styleClass="",this.returnClick=new t.bkB}clickOnReturn(){this.returnClick.emit()}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-form-footer-submit"]],inputs:{isSubmitDisabled:"isSubmitDisabled",isSubmitLoading:"isSubmitLoading",styleClass:"styleClass"},outputs:{returnClick:"returnClick"},decls:3,vars:5,consts:[["pButton","","type","button","label","Voltar","iconPos","left","icon","pi pi-chevron-left",1,"p-button-outlined","p-button-secondary","w-full","md:w-20rem",3,"click"],["pButton","","label","Salvar","iconPos","right","icon","pi pi-save","type","submit",1,"w-full","md:w-20rem",3,"loading","disabled"]],template:function(s,o){1&s&&(t.j41(0,"div")(1,"button",0),t.bIt("click",function(){return o.clickOnReturn()}),t.k0s(),t.nrm(2,"button",1),t.k0s()),2&s&&(t.HbH(o.styleClass),t.R7$(2),t.Y8G("loading",o.isSubmitLoading)("disabled",o.isSubmitDisabled))},dependencies:[d._f]})}return n})();var ut=r(5430),dt=r(675),ft=r(229),ht=r(4842);function _t(n,i){1&n&&(t.qex(0),t.EFF(1," Name is required. "),t.bVm())}function gt(n,i){if(1&n&&(t.j41(0,"small",17),t.DNE(1,_t,2,0,"ng-container",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.formControls.name.hasError("required"))}}function Ct(n,i){1&n&&(t.qex(0),t.EFF(1," Email is required. "),t.bVm())}function bt(n,i){1&n&&(t.qex(0),t.EFF(1," Invalid email format. "),t.bVm())}function yt(n,i){if(1&n&&(t.j41(0,"small",17),t.DNE(1,Ct,2,0,"ng-container",18)(2,bt,2,0,"ng-container",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.formControls.email.hasError("required")),t.R7$(),t.Y8G("ngIf",e.formControls.email.hasError("email"))}}function vt(n,i){1&n&&(t.qex(0),t.EFF(1," Password is required. "),t.bVm())}function kt(n,i){if(1&n&&(t.j41(0,"small",17),t.DNE(1,vt,2,0,"ng-container",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.formControls.password.hasError("required"))}}function St(n,i){1&n&&(t.qex(0),t.EFF(1," Role is required. "),t.bVm())}function Rt(n,i){if(1&n&&(t.j41(0,"small",17),t.DNE(1,St,2,0,"ng-container",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.formControls.role_id.hasError("required"))}}let F=(()=>{class n{constructor(e,s,o,a,f){this._router=e,this._acRoute=s,this._formBuilder=o,this._location=a,this._usersAPIService=f,this.mainRoutesNames=_.q,this.roles=[{id:"1",name:"Admin"},{id:"2",name:"Manager"}],this.routeParameterId=null,this.hasUnsavedChanges=!1}get formControls(){return this.itemDetailsForm.controls}ngOnInit(){this.initForm(),this.routeParameterId=this._acRoute.snapshot.paramMap.get("id"),this.getResources()}ngOnDestroy(){this._formChangesSubscription$.unsubscribe()}canDeactivate(){return!this.hasUnsavedChanges||confirm("You have unsaved changes. Are you sure you want to exit?")}beforeUnloadEvent(e){this.hasUnsavedChanges&&(e.returnValue=!0)}navigateBack(){var e=this;return(0,m.A)(function*(){yield e._router.navigate([`${T.q.MAIN.url}/${_.q.USERS.url}`])})()}onSubmit(){if(this.isSubmitted=!0,this.itemDetailsForm.invalid)return void(this.isSubmitted=!1);const e=this.clearFormDataObject(this.itemDetailsForm.getRawValue());this.createOrUpdateItem(e)}createOrUpdateItem(e){var s=this;return(0,m.A)(function*(){try{const o=s.getNewMockUser(e);s.fillForm(o),s.routeParameterId||s._location.replaceState(`/${T.q.MAIN.url}/${_.q.USERS.url}/${o.id}`),s.hasUnsavedChanges=!1,b.A.success("User Registration","User registered successfully!"),s.isSubmitted=!1}catch(o){console.error(o)}finally{s.isSubmitted=!1}})()}clearFormDataObject(e){const s=mt.cloneObject(e);return e.id||delete s.id,s}getResources(){var e=this;return(0,m.A)(function*(){try{if(e.routeParameterId){const s=e.getMockUser();e.fillForm(s,!1)}else e.formControls.password.setValidators([l.k0.minLength(3),l.k0.required]),e.itemDetailsForm.updateValueAndValidity()}catch(s){console.error(s)}})()}fillForm(e,s){this.itemDetailsForm.patchValue(e,{emitEvent:s})}initForm(){this.itemDetailsForm=this._formBuilder.group({id:[""],name:["",[l.k0.required]],email:["",[l.k0.required,l.k0.email]],password:[""],role_id:["",[l.k0.required]],must_reset_password:[!1,[l.k0.required]]}),this._formChangesSubscription$=this.itemDetailsForm.valueChanges.subscribe(e=>this.hasUnsavedChanges=!0)}getMockUser(){return{id:"uuid",name:"Demo 1",email:"demo1@email.com",must_reset_password:!1,role_id:"1",role:{id:"1",name:"Admin"}}}getNewMockUser(e){return{id:"uuid-new",name:e.name,email:e.email,must_reset_password:e.must_reset_password,role_id:e.role_id}}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(c.Ix),t.rXU(c.nX),t.rXU(l.ok),t.rXU(h.aZ),t.rXU(k))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-users-details"]],hostBindings:function(s,o){1&s&&t.bIt("beforeunload",function(f){return o.beforeUnloadEvent(f)},!1,t.tSv)},decls:31,vars:21,consts:[[1,"card"],[1,"mb-4","flex","justify-content-between","align-items-center"],[3,"icon","title"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"p-field"],["for","name"],["id","name","type","text","pInputText","","formControlName","name"],["class","p-error",4,"ngIf"],["for","email"],["id","email","type","email","pInputText","","formControlName","email",3,"readOnly"],["for","password"],["formControlName","password","appendTo","body","promptLabel","Choose a good password","weakLabel","Weak","mediumLabel","Improving","strongLabel","Great",3,"toggleMask"],["for","role_id"],["id","id","formControlName","role_id","optionLabel","name","optionValue","id","placeholder","Select a role profile","appendTo","body",3,"options"],[1,"p-field","p-field-checkbox","my-5"],["inputId","must_reset_password","formControlName","must_reset_password","binary","true","styleClass","mr-2","label","Force password change during next login?",1,"font-bold"],["styleClass","mt-6 gap-3 flex flex-wrap align-items-center justify-content-center",3,"returnClick","isSubmitDisabled","isSubmitLoading"],[1,"p-error"],[4,"ngIf"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"app-page-header",2),t.k0s(),t.j41(3,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(4,"div",4)(5,"label",5),t.EFF(6,"Full Name"),t.k0s(),t.nrm(7,"input",6),t.DNE(8,gt,2,1,"small",7),t.nI1(9,"formControlInvalid"),t.k0s(),t.j41(10,"div",4)(11,"label",8),t.EFF(12,"Email"),t.k0s(),t.nrm(13,"input",9),t.DNE(14,yt,3,2,"small",7),t.nI1(15,"formControlInvalid"),t.k0s(),t.j41(16,"div",4)(17,"label",10),t.EFF(18,"Password"),t.k0s(),t.nrm(19,"p-password",11),t.DNE(20,kt,2,1,"small",7),t.nI1(21,"formControlInvalid"),t.k0s(),t.j41(22,"div",4)(23,"label",12),t.EFF(24,"Role"),t.k0s(),t.nrm(25,"p-dropdown",13),t.DNE(26,Rt,2,1,"small",7),t.nI1(27,"formControlInvalid"),t.k0s(),t.j41(28,"div",14),t.nrm(29,"p-checkbox",15),t.k0s(),t.j41(30,"app-form-footer-submit",16),t.bIt("returnClick",function(){return o.navigateBack()}),t.k0s()()()),2&s&&(t.R7$(2),t.Mz_("title","",o.mainRoutesNames.USERS.label," Registration"),t.Y8G("icon",o.mainRoutesNames.USERS.icon),t.R7$(),t.Y8G("formGroup",o.itemDetailsForm),t.R7$(5),t.Y8G("ngIf",t.bMT(9,13,o.formControls.name)),t.R7$(5),t.Y8G("readOnly",o.routeParameterId),t.R7$(),t.Y8G("ngIf",t.bMT(15,15,o.formControls.email)),t.R7$(5),t.Y8G("toggleMask",!0),t.R7$(),t.Y8G("ngIf",t.bMT(21,17,o.formControls.password)),t.R7$(5),t.Y8G("options",o.roles),t.R7$(),t.Y8G("ngIf",t.bMT(27,19,o.formControls.role_id)),t.R7$(4),t.Y8G("isSubmitDisabled",o.itemDetailsForm.invalid||!o.hasUnsavedChanges)("isSubmitLoading",o.isSubmitted))},dependencies:[h.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,pt,R,S.S,ut.Sc,dt.ms,ft._2,ht.N],styles:[".p-field[_ngcontent-%COMP%]{margin-bottom:1rem}.p-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.25rem}"]})}return n})(),I=(()=>{class n{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tt=r(9627);let Ft=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[h.MD,l.X1,Tt.G,c.iI.forChild([{path:"",component:ct,data:{reuseRoute:!0}},{path:"new",component:F,canDeactivate:[I]},{path:":id",component:F,canDeactivate:[I]}])]})}return n})()}}]);